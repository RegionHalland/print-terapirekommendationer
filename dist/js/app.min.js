!function(u){function l(e,t){for(var n=0,c=e.length;n<c;n++)!function(e){u(e.el).on("change",function(){t(e,u(this).prop("checked"))}),e.children&&l(e.children,t)}(e[n])}function p(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var e={listItemBefore:'<span class="item">',listItemAfter:"</span>",listItemsDivider:", ",labelExceptBefore:" (except ",labelExceptAfter:")",labelExceptBetween:", ",labelNothingIsSelected:"Nothing is selected"},n=[];u.fn.deepcheckbox=function(s){if(n.indexOf(this.selector)<0){var t=function e(t,n){for(var c=[],l=t.find("ul:first > li"),i=0,r=l.length;i<r;i++){var a=u(l[i]).find("input[type=checkbox]:first"),h=p();a.data("id")||a.data("id",h),a.data("name")||a.data("name",h);var d={el:a},o=e(u(l[i]),a);o&&(d.children=o),n&&(d.parent=n),c.push(d)}return 0<c.length&&c}(this);l(t,function(e,t){e.children&&function e(t,n){for(var c=0,l=t.length;c<l;c++)t[c].el.prop("checked",n),t[c].children&&e(t[c].children,n)}(e.children,t)}),s||(s={}),(s=u.extend(e,s)).readableListTarget&&(u(s.readableListTarget).html(s.labelNothingIsSelected),l(t,function(){var o=[],p=[],f=[],e=function e(t,n,c){n||(n=0);for(var l=0,i=t.length;l<i;l++){if(t[l].el.prop("checked")){var r=s.listItemBefore.replace("{{id}}",t[l].el.data("id"))+t[l].el.data("name"),a=0;if(t[l].children){for(var h=0,d=t[l].children.length;h<d;h++)t[l].children[h].el.prop("checked")||(p.push(t[l].children[h].el.data("id")),0===a&&(r+=s.labelExceptBefore),0<a&&(r+=s.labelExceptBetween),r+=t[l].children[h].el.data("name"),a++);0<a&&(r+=s.labelExceptAfter)}r+=s.listItemAfter,0<n&&t[l].el.prop("checked")&&!t[l].parent.prop("checked")&&(c=!1),(!c||0<a)&&(f.push(r),o.push(t[l].el.data("id")))}t[l].children&&e(t[l].children,n+1,!0)}return f.join(s.listItemsDivider)}(t);u(s.readableListTarget).html(0<e.length?e:s.labelNothingIsSelected),s.onChange&&"function"==typeof s.onChange&&s.onChange(o,p)})),n.push(this.selector)}}}(jQuery),function(e){var t=e(".js-select-all"),n=e(".js-checkboxes").find('input[type="checkbox"]');t.change(function(){e(".js-checkboxes").find('input[type="checkbox"]:checked').length<n.length?n.prop("checked",!0):n.prop("checked",!1)}),n.change(function(){e(".js-checkboxes").find('input[type="checkbox"]:checked').length===n.length?t.prop("checked",!0):t.prop("checked",!1)})}(jQuery);